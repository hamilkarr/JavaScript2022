<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    <div class="container">
        <div class="row">

            <!-- <div class="col-sm-4">
                <img src="https://via.placeholder.com/600" class="w-100">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
            </div> -->

        </div>
    </div>
    <div class="container">
        <button id="more" class="btn btn-danger">더보기</button>
    </div>

    <script>
        let products = [
            { id: 0, price: 70000, title: 'Blossom Dress' },
            { id: 1, price: 50000, title: 'Springfield Shirt' },
            { id: 2, price: 60000, title: 'Black Monastery' }
        ];

        function listHtml(array) {
            array.forEach(function (goods, i) {
                $(".row").append(
                    `<div class="col-sm-4">
                    <img src="https://via.placeholder.com/600" class="w-100">
                    <h5>${goods.title}</h5>
                    <p>${goods.price}</p>
                </div>`
                )
            });
        }

        listHtml(products);

        let moreButtonCount = 0;

        $(".btn").on("click", function () {
            if (moreButtonCount == 0) {
                $.get("https://codingapple1.github.io/js/more1.json")
                    .done(function (data) {
                        // console.log(data);
                        /*
                        data.forEach(function (goods, i) {
                            $(".row").append(
                                `<div class="col-sm-4">
                                    <img src="https://via.placeholder.com/600" class="w-100">
                                    <h5>${goods.title}</h5>
                                    <p>${goods.price}</p>
                                </div>`
                            )
                        });
                        */
                        listHtml(data);
                        moreButtonCount = 1;
                        return moreButtonCount;
                    })
                    .fail(function () {
                        console.log("실패함");
                    });
            } else if(moreButtonCount == 1){
                $.get("https://codingapple1.github.io/js/more2.json")
                    .done(function (data) {
                        listHtml(data)
                        moreButtonCount++;
                        return moreButtonCount;
                    })
                    .fail(() => {
                        console.log("실패함222");
                    })
            } else {
                $("#more").css("display","none");
            }
        });

    </script>
</body>

</html>